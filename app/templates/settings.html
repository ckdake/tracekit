{% extends "base.html" %}
{% block title %}tracekit — Settings{% endblock %}

{% block body %}
<div class="container-narrow">
    <div class="card">
        <h2>General</h2>
        <div class="field-row">
            <label for="timezone">Home timezone</label>
            <select id="timezone">
                {% for tz in timezones %}
                <option value="{{ tz }}" {% if tz == config.home_timezone %}selected{% endif %}>{{ tz }}</option>
                {% endfor %}
            </select>
        </div>
        <label class="toggle">
            <input type="checkbox" id="debug-toggle" {% if config.debug %}checked{% endif %}>
            <span class="toggle-track"><span class="toggle-thumb"></span></span>
            <span class="toggle-label">Enable debug mode</span>
        </label>
    </div>

    <div class="card">
        <h2>Providers</h2>
        <p class="drag-hint">drag to set priority order — the top provider has the highest priority.
            when multiple providers have data for the same activity, the highest-priority provider's values override the others.</p>
        <p class="field-help">
            <strong>enabled</strong> — enables pull and push for this provider.<br>
            <strong>sync equipment</strong> — when set, this provider will modify the equipment on matching activities; the highest-priority provider with data wins.<br>
            <strong>sync name</strong> — when set, this provider will modify the activity name; the highest-priority provider with data wins.
        </p>
        <div id="provider-list"></div>
    </div>

</div>
<div id="status-msg"></div>

<script>const INITIAL_CONFIG = {{ config | tojson }};</script>
<script src="{{ url_for('static', filename='settings.js') }}"></script>
{% endblock %}
